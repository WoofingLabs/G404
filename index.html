<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>404 - Not Found</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EError%3C/text%3E%3C/svg%3E">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap');
        body { font-family: 'Space Mono', monospace; }
        .glitch { position: relative; }
        .glitch::before, .glitch::after {
            content: '404';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: #111;
            clip-path: inset(0 0 0 0);
            animation: glitch-anim 2s infinite;
        }
        .glitch::before { left: 2px; text-shadow: -2px 0 #f0f; animation-delay: -1s; }
        .glitch::after { left: -2px; text-shadow: 2px 0 #0ff; }
        @keyframes glitch-anim {
            0%, 100% { clip-path: inset(0 0 0 0); transform: translate(0); }
            20% { clip-path: inset(0 0 70% 0); transform: translate(-2px, 2px); }
            40% { clip-path: inset(33% 0 33% 0); transform: translate(2px, -2px); }
            60% { clip-path: inset(70% 0 0 0); transform: translate(-2px, 2px); }
            80% { clip-path: inset(0 0 0 70%); transform: translate(2px, -2px); }
        }
        .scanline {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: linear-gradient(to bottom, transparent 50%, rgba(255,0,255,0.05) 50%);
            background-size: 100% 4px;
            animation: scan 6s linear infinite;
            pointer-events: none;
            z-index: 10;
        }
        @keyframes scan { 0% { transform: translateY(-100%); } 100% { transform: translateY(100%); } }
        .noise {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==');
            opacity: 0.05;
            pointer-events: none;
            z-index: 5;
        }
        .blink { animation: blink 1s steps(1) infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
        .terminal { background: #111; border: 1px solid #333; }
    </style>
</head>
<body class="bg-black text-green-400 min-h-screen flex items-center justify-center overflow-hidden relative">
    <div class="scanline"></div>
    <div class="noise"></div>

    <div class="container mx-auto px-4 text-center relative z-20">
        <div class="glitch text-9xl font-bold mb-4">404</div>
        <h1 class="text-4xl md:text-6xl mb-2 text-red-500">Not Found</h1>
        <p class="text-xl text-gray-400 mb-8">The page you are looking for does not exist.</p>

        <div class="terminal p-6 rounded max-w-2xl mx-auto mb-8 text-left text-sm">
            <div class="flex items-center mb-4">
                <span class="text-red-500 mr-2">$</span>
                <span class="blink">_</span>
            </div>
            <p class="text-green-400 mb-2">> Initializing ERROR protocol...</p>
            <p class="text-yellow-400 mb-2">> Contract: 0x0073f743FcAAA1Fc9fC235A886e2Ed60FDd779Eb</p>
            <p class="text-cyan-400 mb-2">> Symbol: ERROR | 1 GT = 500,000 ERROR</p>
            <p class="text-gray-500">> Type 'subscribe' or 'transfer' to continue...</p>
        </div>

        <!-- 认购进度 -->
        <div class="terminal p-4 rounded max-w-2xl mx-auto mb-6">
            <p class="text-xs text-gray-500 mb-2">PROGRESS</p>
            <div class="w-full bg-gray-800 rounded h-2 overflow-hidden">
                <div id="progressBar" class="h-full bg-gradient-to-r from-red-500 to-cyan-500 transition-all duration-500" style="width: 0%"></div>
            </div>
            <p id="progressText" class="text-xs text-gray-400 mt-1">0 / 1,000,000,000 ERROR (0%)</p>
        </div>

        <div class="terminal p-6 rounded max-w-2xl mx-auto">
            <button id="connectWalletButton" class="w-full py-3 bg-red-900 hover:bg-red-800 text-white rounded mb-4 transition-all">CONNECT WALLET</button>
            <p id="networkStatus" class="text-xs text-gray-500 mb-4">Click to connect...</p>

            <div class="bg-gray-900 p-3 rounded mb-4 text-xs font-mono break-all">
                0x0073f743FcAAA1Fc9fC235A886e2Ed60FDd779Eb
                <button class="ml-2 text-gray-500 hover:text-cyan-400" onclick="copyContract()">Copy</button>
            </div>

            <div class="bg-gray-900 p-3 rounded mb-4 text-xs">
                <span id="balanceStatus">GT: 0 | ERROR: 0</span>
            </div>

            <!-- 认购 -->
            <div class="mb-6">
                <label class="block text-left text-xs text-gray-500 mb-1">SUBSCRIBE (integer GT)</label>
                <input type="text" id="subscribeAmount" placeholder="1, 2, 3..." class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded text-white text-sm mb-1">
                <p id="subscribeInfo" class="text-xs text-cyan-400 mb-2">Will receive: 0 ERROR</p>
                <button id="subscribeButton" class="w-full py-2 bg-green-900 hover:bg-green-800 text-white rounded text-sm transition-all disabled:bg-gray-800" disabled>SUBSCRIBE</button>
            </div>

            <!-- 转账 -->
            <div>
                <label class="block text-left text-xs text-gray-500 mb-1">TRANSFER ERROR</label>
                <input type="text" id="transferTo" placeholder="0x..." class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded text-white text-sm mb-1">
                <input type="text" id="transferAmount" placeholder="amount" class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded text-white text-sm mt-1 mb-2">
                <button id="transferButton" class="w-full py-2 bg-cyan-900 hover:bg-cyan-800 text-white rounded text-sm transition-all disabled:bg-gray-800" disabled>TRANSFER</button>
            </div>
        </div>

        <div class="mt-12 text-xs text-gray-600">
            © 2025 ERROR Protocol. Page intentionally not found.
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/web3@1.7.0/dist/web3.min.js"></script>
    <script>
        const ERROR_ADDRESS = '0x0073f743FcAAA1Fc9fC235A886e2Ed60FDd779Eb';
        const MAX_SUPPLY = 1000000000;
        const ERROR_PER_GT = 500000;

        const errorAbi = [
            {"inputs":[],"stateMutability":"nonpayable","type":"constructor"},
            {"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"subscriber","type":"address"},{"indexed":false,"internalType":"uint256","name":"gtAmount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"g404Amount","type":"uint256"}],"name":"Subscription","type":"event"},
            {"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},
            {"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[],"name":"subscribe","outputs":[],"stateMutability":"payable","type":"function"},
            {"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}
        ];

        const chains = { GateLayer: { chainId: 10088, chainName: 'Gate Layer', rpcUrl: 'https://gatelayer-mainnet.gatenode.cc', nativeCurrency: { name: 'GT', symbol: 'GT', decimals: 18 } } };

        let web3, account, errorContract;

        async function waitForTransaction(txHash) {
            let receipt = null;
            const maxAttempts = 30;
            let attempts = 0;
            while (attempts < maxAttempts) {
                receipt = await web3.eth.getTransactionReceipt(txHash);
                if (receipt) return receipt.status ? receipt : Promise.reject(new Error('Failed'));
                await new Promise(r => setTimeout(r, 2000));
                attempts++;
            }
            throw new Error('Timeout');
        }

        async function retry(fn, max = 10) {
            for (let i = 0; i < max; i++) {
                try { return await fn(); } catch { await new Promise(r => setTimeout(r, 2000)); }
            }
            throw new Error('Failed');
        }

        async function initializeWeb3() {
            if (!window.ethereum) return document.getElementById('networkStatus').innerText = 'Install MetaMask';
            web3 = new Web3(window.ethereum);
            try {
                await window.ethereum.request({ method: 'eth_requestAccounts' });
                account = (await web3.eth.getAccounts())[0];
                document.getElementById('connectWalletButton').innerText = `CONNECTED: ${account.slice(0,6)}...${account.slice(-4)}`;
                await switchNetwork('GateLayer');
                errorContract = new web3.eth.Contract(errorAbi, ERROR_ADDRESS);
                await Promise.all([checkBalances(), updateProgress()]);
                document.getElementById('networkStatus').innerText = 'Connected to Gate Layer';
            } catch (e) {
                document.getElementById('networkStatus').innerText = 'Failed: ' + e.message;
            }
        }

        async function switchNetwork(chain) {
            const c = chains[chain];
            try {
                await window.ethereum.request({ method: 'wallet_switchEthereumChain', params: [{ chainId: `0x${c.chainId.toString(16)}` }] });
            } catch (e) {
                if (e.code === 4902) {
                    await window.ethereum.request({ method: 'wallet_addEthereumChain', params: [{
                        chainId: `0x${c.chainId.toString(16)}`, chainName: c.chainName, rpcUrls: [c.rpcUrl],
                        nativeCurrency: c.nativeCurrency
                    }] });
                } else throw e;
            }
        }

        async function checkBalances() {
            if (!account) return;
            try {
                const gt = await retry(() => web3.eth.getBalance(account));
                const errorBal = await retry(() => errorContract.methods.balanceOf(account).call());
                const gtFmt = Number(web3.utils.fromWei(gt, 'ether')).toFixed(4);
                const errorFmt = Number(web3.utils.fromWei(errorBal, 'ether')).toFixed(0);
                document.getElementById('balanceStatus').innerText = `GT: ${gtFmt} | ERROR: ${errorFmt}`;
            } catch (e) {
                document.getElementById('networkStatus').innerText = 'Balance query failed';
            }
        }

        async function updateProgress() {
            try {
                const total = await retry(() => errorContract.methods.totalSupply().call());
                const totalNum = Number(total);
                const percent = (totalNum / (MAX_SUPPLY * 1e18)) * 100;
                document.getElementById('progressBar').style.width = `${percent}%`;
                document.getElementById('progressText').innerText = `${(totalNum / 1e18).toFixed(0)} / ${MAX_SUPPLY} ERROR (${percent.toFixed(2)}%)`;
            } catch (e) {
                document.getElementById('progressText').innerText = 'Progress failed';
            }
        }

        function updateSubscribeInfo() {
            const amt = document.getElementById('subscribeAmount').value.trim();
            const num = parseInt(amt);
            if (!isNaN(num) && num > 0) {
                document.getElementById('subscribeInfo').innerText = `Will receive: ${num * ERROR_PER_GT} ERROR`;
                document.getElementById('subscribeButton').disabled = false;
            } else {
                document.getElementById('subscribeInfo').innerText = 'Enter integer GT';
                document.getElementById('subscribeButton').disabled = true;
            }
        }

        async function subscribe() {
            const input = document.getElementById('subscribeAmount').value.trim();
            const gtAmount = parseInt(input);
            if (isNaN(gtAmount) || gtAmount <= 0) return;
            const value = web3.utils.toWei(gtAmount.toString(), 'ether');
            const btn = document.getElementById('subscribeButton');
            try {
                btn.disabled = true; btn.innerText = 'SUBSCRIBING...';
                document.getElementById('networkStatus').innerText = 'Sending...';
                const tx = await errorContract.methods.subscribe().send({ from: account, value });
                await waitForTransaction(tx.transactionHash);
                document.getElementById('networkStatus').innerText = 'Success!';
                await Promise.all([checkBalances(), updateProgress()]);
            } catch (e) {
                document.getElementById('networkStatus').innerText = e.code === 4001 ? 'Canceled' : 'Failed';
            } finally {
                btn.disabled = false; btn.innerText = 'SUBSCRIBE';
            }
        }

        async function transfer() {
            const to = document.getElementById('transferTo').value.trim();
            const amt = document.getElementById('transferAmount').value.trim();
            if (!web3.utils.isAddress(to) || !amt) return;
            const amount = web3.utils.toWei(amt, 'ether');
            const btn = document.getElementById('transferButton');
            try {
                btn.disabled = true; btn.innerText = 'TRANSFERRING...';
                document.getElementById('networkStatus').innerText = 'Sending...';
                const tx = await errorContract.methods.transfer(to, amount).send({ from: account });
                await waitForTransaction(tx.transactionHash);
                document.getElementById('networkStatus').innerText = 'Transferred!';
                await checkBalances();
            } catch (e) {
                document.getElementById('networkStatus').innerText = e.code === 4001 ? 'Canceled' : 'Failed';
            } finally {
                btn.disabled = false; btn.innerText = 'TRANSFER';
            }
        }

        function copyContract() {
            navigator.clipboard.writeText(ERROR_ADDRESS).then(() => {
                const n = document.createElement('div');
                n.className = 'fixed bottom-4 right-4 bg-red-900 text-white px-3 py-1 rounded text-xs';
                n.textContent = 'Copied!';
                document.body.appendChild(n);
                setTimeout(() => n.remove(), 2000);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('connectWalletButton').onclick = initializeWeb3;
            document.getElementById('subscribeButton').onclick = subscribe;
            document.getElementById('transferButton').onclick = transfer;
            document.getElementById('subscribeAmount').oninput = updateSubscribeInfo;
            document.getElementById('transferTo').oninput = () => document.getElementById('transferButton').disabled = !web3?.utils?.isAddress(document.getElementById('transferTo').value.trim()) || !account;
            document.getElementById('transferAmount').oninput = () => document.getElementById('transferButton').disabled = !web3?.utils?.isAddress(document.getElementById('transferTo').value.trim()) || !account;
        });
    </script>
</body>
</html>
